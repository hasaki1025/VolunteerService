import{l as V}from "./index-8666cb90.js";import{E as I,a as L,b as S,d as B,c as T}from "./el-col-4806a4fb.js";/* empty css                 */import"./el-tag-ef70e8e0.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     */import{E as z}from "./el-avatar-6735554b.js";import{E as A}from "./el-input-b1cbee16.js";import{g as D,d as W}from "./news-8879efe6.js";import{r as E,f as U,g as $}from "./index-fec54450.js";import{u as q}from "./news-d02ec718.js";import{q as G,b as h,d as P,p as R,E as F,Q as s,U as e,z as t,u as n,L as O,o as Q,R as p,W as X,X as j}from "./index-4cca8065.js";import{_ as H}from "./_plugin-vue_export-helper-c27b6911.js";import"./vnode-6b724b43.js";import"./index-67a21231.js";import"./event-82466d06.js";import"./index-0bf99d73.js";import"./upload-bb522c40.js";import"./pinia-fc5ecdb0.js";const b= _=>(X("data-v-f2e7515a"),_=_(),j(),_),J={class:"tags-container"},K={class:"head"},M={class:"item"},Y=b(()=>s("p",null,"标题",-1)),Z={class:"item buttons"},ee={class:"table-lists"},te=b(()=>s("span",null,"确定删除吗",-1)),ae={class:"dialog-footer"},oe=G({__name:"NewsList",setup(_){const N=q(),u=h(""),m=P([]),i=h(!1),f=h(-1);D().then(o=>{m.push(...o.data.data)}).catch(o=>{console.log("getNewsList",o)});const c=R(()=>m.reduce((o, a, v)=>((u.value===""||a.title.indexOf(u.value)!==-1)&&o.push({data:a,index:v}),o),[])),x=()=>{W(c.value[f.value].data.new_id).then(o=>{m.splice(c.value[f.value].index,1)}).catch(o=>{console.log("deleteNoticeById error",o)}).finally(()=>{i.value=!1})};return(o, a)=>{const v=A,w=I,d=V,y=L,r=S,g=z,k=B,C=T;return Q(),F(O,null,[s("div",J,[s("div",K,[e(y,null,{default:t(()=>[e(w,{span:6},{default:t(()=>[s("div",M,[Y,e(v,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]= l=>u.value=l),placeholder:"标题",class:"input"},null,8,["modelValue"])])]),_:1}),e(w,{span:8},{default:t(()=>[s("div",Z,[e(d,{type:"primary",onClick:a[1]||(a[1]=()=>{n(E).push({name:n(U)})})},{default:t(()=>[p("添加")]),_:1})])]),_:1})]),_:1})]),s("div",ee,[e(k,{stripe:"",border:"",data:n(c),style:{width:"100%"}},{default:t(()=>[e(r,{label:"标题",prop:"data.title"}),e(r,{label:"图片",prop:"data.picture"},{default:t(l=>[e(g,{shape:"square",size:50,src:l.row.data.picture},null,8,["src"])]),_:1}),e(r,{label:"公告内容",prop:"data.content"}),e(r,{label:"发布时间",prop:"data.publish_time"}),e(r,{fixed:"right",label:"操作",width:"120"},{default:t(l=>[e(d,{link:"",type:"primary",size:"small",onClick:()=>{n(N).setWaitEditNew(n(c)[l.$index].data),n(E).push({name:n($)})}},{default:t(()=>[p("修改")]),_:2},1032,["onClick"]),e(d,{link:"",type:"primary",size:"small",onClick:()=>{f.value=l.$index,i.value=!0}},{default:t(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),e(C,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]= l=>i.value=l),title:"警告",width:"30%"},{footer:t(()=>[s("span",ae,[e(d,{onClick:a[2]||(a[2]= l=>i.value=!1)},{default:t(()=>[p("取消")]),_:1}),e(d,{type:"primary",onClick:x},{default:t(()=>[p(" 确定 ")]),_:1})])]),default:t(()=>[te]),_:1},8,["modelValue"])],64)}}});const ge=H(oe,[["__scopeId","data-v-f2e7515a"]]);export{ge as default};
