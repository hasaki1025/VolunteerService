import{l as V}from "./index-8f2c80ed.js";import{E as I,a as L,b as S,d as B,c as T}from "./el-col-685e98bf.js";/* empty css                 */import"./el-tag-5def1315.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     */import{E as z}from "./el-avatar-92af8c54.js";import{E as A}from "./el-input-08805023.js";import{g as D,d as W}from "./news-2b878464.js";import{r as E}from "./index-8be7bc5b.js";import{i as U,j as $}from "./routes-88cdf169.js";import{u as q}from "./news-c4c9ab60.js";import{q as G,b as h,d as P,p as R,E as j,Q as s,U as e,z as t,u as n,L as F,o as O,R as p,V as Q,W as H}from "./index-fe68f829.js";import{_ as J}from "./_plugin-vue_export-helper-c27b6911.js";import"./vnode-9a7076ee.js";import"./index-31493d86.js";import"./event-82466d06.js";import"./index-2bc64b82.js";import"./upload-ae68905d.js";import"./pinia-251ef24e.js";const b= _=>(Q("data-v-f2e7515a"),_=_(),H(),_),K={class:"tags-container"},M={class:"head"},X={class:"item"},Y=b(()=>s("p",null,"标题",-1)),Z={class:"item buttons"},ee={class:"table-lists"},te=b(()=>s("span",null,"确定删除吗",-1)),oe={class:"dialog-footer"},ae=G({__name:"NewsList",setup(_){const N=q(),u=h(""),m=P([]),i=h(!1),f=h(-1);D().then(a=>{m.push(...a.data.data)}).catch(a=>{console.log("getNewsList",a)});const c=R(()=>m.reduce((a, o, v)=>((u.value===""||o.title.indexOf(u.value)!==-1)&&a.push({data:o,index:v}),a),[])),x=()=>{W(c.value[f.value].data.new_id).then(a=>{m.splice(c.value[f.value].index,1)}).catch(a=>{console.log("deleteNoticeById error",a)}).finally(()=>{i.value=!1})};return(a, o)=>{const v=A,w=I,r=V,y=L,d=S,g=z,k=B,C=T;return O(),j(F,null,[s("div",K,[s("div",M,[e(y,null,{default:t(()=>[e(w,{span:6},{default:t(()=>[s("div",X,[Y,e(v,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]= l=>u.value=l),placeholder:"标题",class:"input"},null,8,["modelValue"])])]),_:1}),e(w,{span:8},{default:t(()=>[s("div",Z,[e(r,{type:"primary",onClick:o[1]||(o[1]=()=>{n(E).push({name:n(U)})})},{default:t(()=>[p("添加")]),_:1})])]),_:1})]),_:1})]),s("div",ee,[e(k,{stripe:"",border:"",data:n(c),style:{width:"100%"}},{default:t(()=>[e(d,{label:"标题",prop:"data.title"}),e(d,{label:"图片",prop:"data.picture"},{default:t(l=>[e(g,{shape:"square",size:50,src:l.row.data.picture},null,8,["src"])]),_:1}),e(d,{label:"公告内容",prop:"data.content"}),e(d,{label:"发布时间",prop:"data.publish_time"}),e(d,{fixed:"right",label:"操作",width:"120"},{default:t(l=>[e(r,{link:"",type:"primary",size:"small",onClick:()=>{n(N).setWaitEditNew(n(c)[l.$index].data),n(E).push({name:n($)})}},{default:t(()=>[p("修改")]),_:2},1032,["onClick"]),e(r,{link:"",type:"primary",size:"small",onClick:()=>{f.value=l.$index,i.value=!0}},{default:t(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),e(C,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]= l=>i.value=l),title:"警告",width:"30%"},{footer:t(()=>[s("span",oe,[e(r,{onClick:o[2]||(o[2]= l=>i.value=!1)},{default:t(()=>[p("取消")]),_:1}),e(r,{type:"primary",onClick:x},{default:t(()=>[p(" 确定 ")]),_:1})])]),default:t(()=>[te]),_:1},8,["modelValue"])],64)}}});const ke=J(ae,[["__scopeId","data-v-f2e7515a"]]);export{ke as default};
