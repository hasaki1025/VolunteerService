import{aa as W,a as ee,h as ce,am as te,J as ge,ak as he,al as _e,b as oe,j as q,F as be,E as Ce,_ as ue,ax as Ee,U as ke,D as ne,A as we,a3 as Ie,an as se,w as Me}from "./base-59bc21bd.js";import{u as le,E as Se}from "./el-button-7ad4376d.js";import{U as re,E as Te}from "./el-input-3f30a5c7.js";import{E as De}from "./el-avatar-83a5c01b.js";import{E as Ae,a as Be}from "./el-menu-item-93068572.js";import{F as $e,b as Le}from "./el-popper-44cd3356.js";import{E as Fe}from "./el-image-viewer-d764d364.js";import{v as J,T as Pe}from "./runtime-dom.esm-bundler-5dfda05a.js";import{u as Oe}from "./activity-80797066.js";import{a as xe,s as Ve,j as ze}from "./activities-7633ded1.js";import{i as Ne,a3 as de,aq as Re,a4 as Ye,M as je,aB as Ue,K,Q as He,ah as H,W as Y,a as y,a9 as S,e as Xe,O as ae,T as N,o as T,c as R,Y as s,a7 as F,V as e,ac as b,Z as _,a5 as Z,ai as We,a8 as G,aa as me,I as w,R as qe,C as Je,am as Ke,X as Ze,a6 as Q,ae as Ge,ax as Qe,aj as eo,L as oo,F as ie,ab as to,$ as j,a0 as no,a1 as so,_ as lo}from "./_plugin-vue_export-helper-db55c57b.js";import{P as X}from "./vnode-dc4413bd.js";import{b as ao,u as io,a as co}from "./index-16fe3321.js";import{t as uo}from "./error-f1912ce6.js";import"./index-abc4dcdb.js";import"./aria-06e80a3d.js";import"./pinia-753b0366.js";const ro=(...o)=> l=>{o.forEach(t=>{Ne(t)?t(l):t.value=l})},fe=Symbol("dialogInjectionKey"),mo=(o, l, t)=>{let u={offsetX:0,offsetY:0};const i= a=>{const m=a.clientX,g=a.clientY,{offsetX:v,offsetY:h}=u,n=o.value.getBoundingClientRect(),d=n.left,I=n.top,D=n.width,P=n.height,O=document.documentElement.clientWidth,M=document.documentElement.clientHeight,A=-d+v,B=-I+h,p=O-d-D+v,$=M-I-P+h,z= L=>{const r=Math.min(Math.max(v+L.clientX-m,A),p),k=Math.min(Math.max(h+L.clientY-g,B),$);u={offsetX:r,offsetY:k},o.value.style.transform=`translate(${W(r)}, ${W(k)})`},C=()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",z),document.addEventListener("mouseup",C)},f=()=>{l.value&&o.value&&l.value.addEventListener("mousedown",i)},c=()=>{l.value&&o.value&&l.value.removeEventListener("mousedown",i)};de(()=>{Re(()=>{t.value?f():c()})}),Ye(()=>{c()})},fo= o=>{je(o)||uo("[useLockscreen]","You need to pass a ref param to this function");const l=ee("popup"),t=Ue(()=>l.bm("parent","hidden"));if(!ce||te(document.body,t.value))return;let u=0,i=!1,f="0";const c=()=>{setTimeout(()=>{_e(document.body,t.value),i&&(document.body.style.width=f)},200)};K(o, a=>{if(!a){c();return}i=!te(document.body,t.value),i&&(f=document.body.style.width),u=ao(l.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,g=ge(document.body,"overflowY");u>0&&(m||g==="scroll")&&i&&(document.body.style.width=`calc(100% - ${u}px)`),he(document.body,t.value)}),He(()=>c())},pe= o=>{if(!o)return{onClick:H,onMousedown:H,onMouseup:H};let l=!1,t=!1;return{onClick: c=>{l&&t&&o(c),l=t=!1},onMousedown: c=>{l=c.target===c.currentTarget},onMouseup: c=>{t=c.target===c.currentTarget}}},po=oe({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:q([String,Array,Object])},zIndex:{type:q([String,Number])}}),vo={click: o=>o instanceof MouseEvent};var yo=Y({name:"ElOverlay",props:po,emits:vo,setup(o, {slots:l,emit:t}){const u=ee("overlay"),i= m=>{t("click",m)},{onClick:f,onMousedown:c,onMouseup:a}=pe(o.customMaskEvent?void 0:i);return()=>o.mask?y("div",{class:[u.b(),o.overlayClass],style:{zIndex:o.zIndex},onClick:f,onMousedown:c,onMouseup:a},[S(l,"default")],X.STYLE|X.CLASS|X.PROPS,["onClick","onMouseup","onMousedown"]):Xe("div",{class:o.overlayClass,style:{zIndex:o.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(l,"default")])}});const go=yo,ve=oe({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:be},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),ho={close:()=>!0},_o=["aria-label"],bo=["id"],Co=Y({name:"ElDialogContent"}),Eo=Y({...Co,props:ve,emits:ho,setup(o){const l=o,{t}=io(),{Close:u}=Ee,{dialogRef:i,headerRef:f,bodyId:c,ns:a,style:m}=ae(fe),{focusTrapRef:g}=ae($e),v=ro(g,i),h=N(()=>l.draggable);return mo(i,f,h),(n, d)=>(T(),R("div",{ref:e(v),class:F([e(a).b(),e(a).is("fullscreen",n.fullscreen),e(a).is("draggable",e(h)),e(a).is("align-center",n.alignCenter),{[e(a).m("center")]:n.center},n.customClass]),style:me(e(m)),tabindex:"-1"},[s("header",{ref_key:"headerRef",ref:f,class:F(e(a).e("header"))},[S(n.$slots,"header",{},()=>[s("span",{role:"heading",class:F(e(a).e("title"))},b(n.title),3)]),n.showClose?(T(),R("button",{key:0,"aria-label":e(t)("el.dialog.close"),class:F(e(a).e("headerbtn")),type:"button",onClick:d[0]||(d[0]= I=>n.$emit("close"))},[y(e(Ce),{class:F(e(a).e("close"))},{default:_(()=>[(T(),Z(We(n.closeIcon||e(u))))]),_:1},8,["class"])],10,_o)):G("v-if",!0)],2),s("div",{id:e(c),class:F(e(a).e("body"))},[S(n.$slots,"default")],10,bo),n.$slots.footer?(T(),R("footer",{key:0,class:F(e(a).e("footer"))},[S(n.$slots,"footer")],2)):G("v-if",!0)],6))}});var ko=ue(Eo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const wo=oe({...ve,appendToBody:{type:Boolean,default:!1},beforeClose:{type:q(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Io={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[re]: o=>ke(o),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Mo=(o, l)=>{const u=Je().emit,{nextZIndex:i}=co();let f="";const c=ne(),a=ne(),m=w(!1),g=w(!1),v=w(!1),h=w(o.zIndex||i());let n,d;const I=we("namespace",Ie),D=N(()=>{const E={},V=`--${I.value}-dialog`;return o.fullscreen||(o.top&&(E[`${V}-margin-top`]=o.top),o.width&&(E[`${V}-width`]=W(o.width))),E}),P=N(()=>o.alignCenter?{display:"flex"}:{});function O(){u("opened")}function M(){u("closed"),u(re,!1),o.destroyOnClose&&(v.value=!1)}function A(){u("close")}function B(){d==null||d(),n==null||n(),o.openDelay&&o.openDelay>0?{stop:n}=se(()=>C(),o.openDelay):C()}function p(){n==null||n(),d==null||d(),o.closeDelay&&o.closeDelay>0?{stop:d}=se(()=>L(),o.closeDelay):L()}function $(){function E(V){V||(g.value=!0,m.value=!1)}o.beforeClose?o.beforeClose(E):p()}function z(){o.closeOnClickModal&&$()}function C(){ce&&(m.value=!0)}function L(){m.value=!1}function r(){u("openAutoFocus")}function k(){u("closeAutoFocus")}function x(E){var V;((V=E.detail)==null?void 0:V.focusReason)==="pointer"&&E.preventDefault()}o.lockScroll&&fo(m);function ye(){o.closeOnPressEscape&&$()}return K(()=>o.modelValue, E=>{E?(g.value=!1,B(),v.value=!0,h.value=o.zIndex?h.value++:i(),qe(()=>{u("open"),l.value&&(l.value.scrollTop=0)})):m.value&&p()}),K(()=>o.fullscreen, E=>{l.value&&(E?(f=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=f)}),de(()=>{o.modelValue&&(m.value=!0,v.value=!0,B())}),{afterEnter:O,afterLeave:M,beforeLeave:A,handleClose:$,onModalClick:z,close:p,doClose:L,onOpenAutoFocus:r,onCloseAutoFocus:k,onCloseRequested:ye,onFocusoutPrevented:x,titleId:c,bodyId:a,closed:g,style:D,overlayDialogStyle:P,rendered:v,visible:m,zIndex:h}},So=["aria-label","aria-labelledby","aria-describedby"],To=Y({name:"ElDialog",inheritAttrs:!1}),Do=Y({...To,props:wo,emits:Io,setup(o, {expose:l}){const t=o,u=Ke();le({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},N(()=>!!u.title)),le({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},N(()=>!!t.customClass));const i=ee("dialog"),f=w(),c=w(),a=w(),{visible:m,titleId:g,bodyId:v,style:h,overlayDialogStyle:n,rendered:d,zIndex:I,afterEnter:D,afterLeave:P,beforeLeave:O,handleClose:M,onModalClick:A,onOpenAutoFocus:B,onCloseAutoFocus:p,onCloseRequested:$,onFocusoutPrevented:z}=Mo(t,f);Ze(fe,{dialogRef:f,headerRef:c,bodyId:v,ns:i,rendered:d,style:h});const C=pe(A),L=N(()=>t.draggable&&!t.fullscreen);return l({visible:m,dialogContentRef:a}),(r, k)=>(T(),Z(eo,{to:"body",disabled:!r.appendToBody},[y(Pe,{name:"dialog-fade",onAfterEnter:e(D),onAfterLeave:e(P),onBeforeLeave:e(O),persisted:""},{default:_(()=>[Q(y(e(go),{"custom-mask-event":"",mask:r.modal,"overlay-class":r.modalClass,"z-index":e(I)},{default:_(()=>[s("div",{role:"dialog","aria-modal":"true","aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:e(g),"aria-describedby":e(v),class:F(`${e(i).namespace.value}-overlay-dialog`),style:me(e(n)),onClick:k[0]||(k[0]=(...x)=>e(C).onClick&&e(C).onClick(...x)),onMousedown:k[1]||(k[1]=(...x)=>e(C).onMousedown&&e(C).onMousedown(...x)),onMouseup:k[2]||(k[2]=(...x)=>e(C).onMouseup&&e(C).onMouseup(...x))},[y(e(Le),{loop:"",trapped:e(m),"focus-start-el":"container",onFocusAfterTrapped:e(B),onFocusAfterReleased:e(p),onFocusoutPrevented:e(z),onReleaseRequested:e($)},{default:_(()=>[e(d)?(T(),Z(ko,Ge({key:0,ref_key:"dialogContentRef",ref:a},r.$attrs,{"custom-class":r.customClass,center:r.center,"align-center":r.alignCenter,"close-icon":r.closeIcon,draggable:e(L),fullscreen:r.fullscreen,"show-close":r.showClose,title:r.title,onClose:e(M)}),Qe({header:_(()=>[r.$slots.title?S(r.$slots,"title",{key:1}):S(r.$slots,"header",{key:0,close:e(M),titleId:e(g),titleClass:e(i).e("title")})]),default:_(()=>[S(r.$slots,"default")]),_:2},[r.$slots.footer?{name:"footer",fn:_(()=>[S(r.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):G("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,So)]),_:3},8,["mask","overlay-class","z-index"]),[[J,e(m)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Ao=ue(Do,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Bo=Me(Ao);const U= o=>(no("data-v-714867b6"),o=o(),so(),o),$o=U(()=>s("div",{class:"header"},[s("h2",null,"志愿活动详情PAGE")],-1)),Lo={class:"images-join"},Fo={class:"information"},Po=U(()=>s("h3",null,"志愿活动信息",-1)),Oo=U(()=>s("h3",null,"活动介绍",-1)),xo=["innerHTML"],Vo={class:"comment"},zo={class:"text-area"},No={class:"username"},Ro={class:"comment-content"},Yo=U(()=>s("p",{style:{"line-height":"2","margin-bottom":"1em"}},"请输入服务时长",-1)),jo={class:"dialog-footer"},Uo=Y({__name:"activityDetail",setup(o){const t=Oe().nextLookActivity,u=w("info"),i=w(!1),f=w(""),c=w(""),a=oo([]);xe(t.a_id).then(n=>{a.push(...n.data.data)}).catch(n=>{console.log("getActivityComment",n)});const m=()=>{Ve(t.a_id,c.value).then(n=>{a.unshift(n.data.data)}).catch(n=>{console.log("handlePublishComment",n)}).finally(()=>{c.value=""})},g= n=>{u.value=n},v=()=>{if(t.left_num===0){alert("当前活动人数已满，不能报名");return}i.value=!0},h=async()=>{ze(t.a_id,parseInt(f.value)).then(n=>{alert(n.data.msg)}).catch(n=>{alert("报名失败")}).finally(()=>{i.value=!1})};return(n, d)=>{const I=Fe,D=Ae,P=Be,O=De,M=Te,A=Se,B=Bo;return T(),R(ie,null,[$o,s("div",Lo,[y(I,{style:{width:"720px"},src:e(t).picture},null,8,["src"]),s("button",{class:"join-activity",onClick:v},"报名")]),y(P,{class:"el-menu-demo",mode:"horizontal","default-active":"info",onSelect:g},{default:_(()=>[y(D,{index:"info"},{default:_(()=>[j("志愿活动信息")]),_:1}),y(D,{index:"comment"},{default:_(()=>[j("评论")]),_:1})]),_:1}),Q(s("div",Fo,[Po,s("p",null,"活动编号: "+b(e(t).a_num),1),s("p",null,"活动名称: "+b(e(t).activity_name),1),s("p",null,"活动类型: "+b(e(t).tag),1),s("p",null,"活动时间: "+b(e(t).time),1),s("p",null,"总招募人数: "+b(e(t).need_num),1),s("p",null,"剩余招募人数: "+b(e(t).left_num),1),s("p",null,"最近点击时间: "+b(e(t).late_click_time),1),s("p",null,"点击次数: "+b(e(t).click_times),1),s("p",null,"联系人: "+b(e(t).contact_person),1),s("p",null,"联系人号码: "+b(e(t).contact_telephone),1),Oo,s("div",{class:"content",innerHTML:e(t).description},null,8,xo)],512),[[J,u.value==="info"]]),Q(s("div",Vo,[s("ul",null,[(T(!0),R(ie,null,to(a,(p, $)=>(T(),R("li",{key:p.cId,class:"comment-item"},[y(O,{shape:"square",size:40,src:p.avater},null,8,["src"]),s("div",zo,[s("p",No,b(p.username),1),s("p",Ro,b(p.content),1)])]))),128))]),y(M,{modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]= p=>c.value=p),rows:4,type:"textarea",placeholder:"Please input"},null,8,["modelValue"]),s("button",{class:"comment-button",onClick:m},"发布")],512),[[J,u.value==="comment"]]),y(B,{modelValue:i.value,"onUpdate:modelValue":d[3]||(d[3]= p=>i.value=p),title:"提示",width:"30%"},{footer:_(()=>[s("span",jo,[y(A,{onClick:d[2]||(d[2]= p=>i.value=!1)},{default:_(()=>[j("取消")]),_:1}),y(A,{type:"primary",onClick:h},{default:_(()=>[j(" 确定 ")]),_:1})])]),default:_(()=>[Yo,y(M,{modelValue:f.value,"onUpdate:modelValue":d[1]||(d[1]= p=>f.value=p),placeholder:"请输入服务时长",type:"number"},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}});const ct=lo(Uo,[["__scopeId","data-v-714867b6"]]);export{ct as default};
