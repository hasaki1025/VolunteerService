import{l as F}from "./index-8f2c80ed.js";import{E,a as V}from "./el-form-item-eb9f0a15.js";import{E as b,a as v}from "./el-radio-89ce49b7.js";import{E as w}from "./el-input-08805023.js";import{u as y}from "./user-168e9568.js";import{r as x}from "./index-8be7bc5b.js";import{U as I}from "./routes-88cdf169.js";import{u as U}from "./user-5fd29a76.js";import{q as h,b as S,d as k,E as R,Q as p,U as o,z as l,o as q,R as B,V as L,W as N}from "./index-fe68f829.js";import{_ as C}from "./_plugin-vue_export-helper-c27b6911.js";import"./event-82466d06.js";import"./upload-ae68905d.js";import"./pinia-251ef24e.js";const G= s=>(L("data-v-3ccd9d4e"),s=s(),N(),s),M={class:"login-body"},z={class:"login-container"},A=G(()=>p("h2",{class:"title"},"社区志愿者管理系统",-1)),O=h({__name:"Login",setup(s){const i=U(),u=S(),e=k({ruleForm:{username:"",password:"",role:""},checked:!0,rules:{username:[{required:!0,message:"账户不能为空"}],password:[{required:!0,message:"密码不能为空"}],role:[{required:!0,message:"密码不能为空"}]}}),_=async()=>{var n;(n=u.value)==null||n.validate(r=>{if(r)y(e.ruleForm.username,e.ruleForm.password,e.ruleForm.role==="管理员"?"manager":"normal").then(t=>{console.log("login result",t),i.setRole(e.ruleForm.role==="管理员"?"manager":"normal"),x.replace({name:I})}).catch(t=>{});else return console.log("error submit!!"),!1})};return(n, r)=>{const t=w,m=E,d=b,c=v,f=F,g=V;return q(),R("div",M,[p("div",z,[A,o(g,{"label-position":"top",rules:e.rules,model:e.ruleForm,ref_key:"loginForm",ref:u,class:"login-form"},{default:l(()=>[o(m,{label:"账号",prop:"username"},{default:l(()=>[o(t,{type:"text",modelValue:e.ruleForm.username,"onUpdate:modelValue":r[0]||(r[0]= a=>e.ruleForm.username=a),modelModifiers:{trim:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(m,{label:"密码",prop:"password"},{default:l(()=>[o(t,{type:"password",modelValue:e.ruleForm.password,"onUpdate:modelValue":r[1]||(r[1]= a=>e.ruleForm.password=a),modelModifiers:{trim:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(m,{label:"角色",prop:"role"},{default:l(()=>[o(c,{modelValue:e.ruleForm.role,"onUpdate:modelValue":r[2]||(r[2]= a=>e.ruleForm.role=a)},{default:l(()=>[o(d,{label:"管理员",value:"manager"}),o(d,{label:"用户",value:"normal"})]),_:1},8,["modelValue"])]),_:1}),o(m,null,{default:l(()=>[o(f,{style:{width:"100%","margin-top":"40px"},type:"primary",onClick:_},{default:l(()=>[B("立即登录")]),_:1})]),_:1})]),_:1},8,["rules","model"])])])}}});const ee=C(O,[["__scopeId","data-v-3ccd9d4e"]]);export{ee as default};
