import{aa as W,a as ee,h as ue,am as ne,J as ge,ak as he,al as _e,b as oe,j as q,F as be,E as Ce,_ as re,ax as Ee,U as ke,D as se,A as we,a3 as Ie,an as le,w as Me}from "./base-59bc21bd.js";import{u as ae,E as Se}from "./el-button-f4b5d6db.js";import{U as de,E as Ae}from "./el-input-c0586f66.js";import{E as Te}from "./el-avatar-06245641.js";import{E as De,a as Be}from "./el-menu-item-638cc1ef.js";import{F as $e,b as Le}from "./el-popper-f8cfcb53.js";import{E as Fe}from "./el-image-viewer-79ed6828.js";import{v as J,T as Pe}from "./index-9b6ac78d.js";import{u as Oe}from "./activity-80797066.js";import{c as xe,a as Ve,s as ze,j as Ne}from "./activities-228c6907.js";import{i as Re,a3 as te,aq as Ye,a4 as je,M as Ue,aB as He,K,Q as Xe,ah as H,W as Y,a as y,a9 as S,e as We,O as ie,T as N,o as A,c as R,Y as s,a7 as F,V as e,ac as b,Z as _,a5 as Z,ai as qe,a8 as G,aa as me,I as w,R as Je,C as Ke,am as Ze,X as Ge,a6 as Q,ae as Qe,ax as eo,aj as oo,L as to,F as ce,ab as no,$ as j,a0 as so,a1 as lo,_ as ao}from "./_plugin-vue_export-helper-db55c57b.js";import{P as X}from "./vnode-dc4413bd.js";import{b as io,u as co,a as uo}from "./index-16fe3321.js";import{t as ro}from "./error-f1912ce6.js";import"./index-8ea7482c.js";import"./aria-06e80a3d.js";import"./pinia-753b0366.js";const mo=(...o)=> l=>{o.forEach(n=>{Re(n)?n(l):n.value=l})},fe=Symbol("dialogInjectionKey"),fo=(o, l, n)=>{let u={offsetX:0,offsetY:0};const i= a=>{const m=a.clientX,g=a.clientY,{offsetX:v,offsetY:h}=u,t=o.value.getBoundingClientRect(),d=t.left,I=t.top,T=t.width,P=t.height,O=document.documentElement.clientWidth,M=document.documentElement.clientHeight,D=-d+v,B=-I+h,p=O-d-T+v,$=M-I-P+h,z= L=>{const r=Math.min(Math.max(v+L.clientX-m,D),p),k=Math.min(Math.max(h+L.clientY-g,B),$);u={offsetX:r,offsetY:k},o.value.style.transform=`translate(${W(r)}, ${W(k)})`},C=()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",z),document.addEventListener("mouseup",C)},f=()=>{l.value&&o.value&&l.value.addEventListener("mousedown",i)},c=()=>{l.value&&o.value&&l.value.removeEventListener("mousedown",i)};te(()=>{Ye(()=>{n.value?f():c()})}),je(()=>{c()})},po= o=>{Ue(o)||ro("[useLockscreen]","You need to pass a ref param to this function");const l=ee("popup"),n=He(()=>l.bm("parent","hidden"));if(!ue||ne(document.body,n.value))return;let u=0,i=!1,f="0";const c=()=>{setTimeout(()=>{_e(document.body,n.value),i&&(document.body.style.width=f)},200)};K(o, a=>{if(!a){c();return}i=!ne(document.body,n.value),i&&(f=document.body.style.width),u=io(l.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,g=ge(document.body,"overflowY");u>0&&(m||g==="scroll")&&i&&(document.body.style.width=`calc(100% - ${u}px)`),he(document.body,n.value)}),Xe(()=>c())},pe= o=>{if(!o)return{onClick:H,onMousedown:H,onMouseup:H};let l=!1,n=!1;return{onClick: c=>{l&&n&&o(c),l=n=!1},onMousedown: c=>{l=c.target===c.currentTarget},onMouseup: c=>{n=c.target===c.currentTarget}}},vo=oe({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:q([String,Array,Object])},zIndex:{type:q([String,Number])}}),yo={click: o=>o instanceof MouseEvent};var go=Y({name:"ElOverlay",props:vo,emits:yo,setup(o, {slots:l,emit:n}){const u=ee("overlay"),i= m=>{n("click",m)},{onClick:f,onMousedown:c,onMouseup:a}=pe(o.customMaskEvent?void 0:i);return()=>o.mask?y("div",{class:[u.b(),o.overlayClass],style:{zIndex:o.zIndex},onClick:f,onMousedown:c,onMouseup:a},[S(l,"default")],X.STYLE|X.CLASS|X.PROPS,["onClick","onMouseup","onMousedown"]):We("div",{class:o.overlayClass,style:{zIndex:o.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(l,"default")])}});const ho=go,ve=oe({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:be},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),_o={close:()=>!0},bo=["aria-label"],Co=["id"],Eo=Y({name:"ElDialogContent"}),ko=Y({...Eo,props:ve,emits:_o,setup(o){const l=o,{t:n}=co(),{Close:u}=Ee,{dialogRef:i,headerRef:f,bodyId:c,ns:a,style:m}=ie(fe),{focusTrapRef:g}=ie($e),v=mo(g,i),h=N(()=>l.draggable);return fo(i,f,h),(t, d)=>(A(),R("div",{ref:e(v),class:F([e(a).b(),e(a).is("fullscreen",t.fullscreen),e(a).is("draggable",e(h)),e(a).is("align-center",t.alignCenter),{[e(a).m("center")]:t.center},t.customClass]),style:me(e(m)),tabindex:"-1"},[s("header",{ref_key:"headerRef",ref:f,class:F(e(a).e("header"))},[S(t.$slots,"header",{},()=>[s("span",{role:"heading",class:F(e(a).e("title"))},b(t.title),3)]),t.showClose?(A(),R("button",{key:0,"aria-label":e(n)("el.dialog.close"),class:F(e(a).e("headerbtn")),type:"button",onClick:d[0]||(d[0]= I=>t.$emit("close"))},[y(e(Ce),{class:F(e(a).e("close"))},{default:_(()=>[(A(),Z(qe(t.closeIcon||e(u))))]),_:1},8,["class"])],10,bo)):G("v-if",!0)],2),s("div",{id:e(c),class:F(e(a).e("body"))},[S(t.$slots,"default")],10,Co),t.$slots.footer?(A(),R("footer",{key:0,class:F(e(a).e("footer"))},[S(t.$slots,"footer")],2)):G("v-if",!0)],6))}});var wo=re(ko,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Io=oe({...ve,appendToBody:{type:Boolean,default:!1},beforeClose:{type:q(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Mo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[de]: o=>ke(o),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},So=(o, l)=>{const u=Ke().emit,{nextZIndex:i}=uo();let f="";const c=se(),a=se(),m=w(!1),g=w(!1),v=w(!1),h=w(o.zIndex||i());let t,d;const I=we("namespace",Ie),T=N(()=>{const E={},V=`--${I.value}-dialog`;return o.fullscreen||(o.top&&(E[`${V}-margin-top`]=o.top),o.width&&(E[`${V}-width`]=W(o.width))),E}),P=N(()=>o.alignCenter?{display:"flex"}:{});function O(){u("opened")}function M(){u("closed"),u(de,!1),o.destroyOnClose&&(v.value=!1)}function D(){u("close")}function B(){d==null||d(),t==null||t(),o.openDelay&&o.openDelay>0?{stop:t}=le(()=>C(),o.openDelay):C()}function p(){t==null||t(),d==null||d(),o.closeDelay&&o.closeDelay>0?{stop:d}=le(()=>L(),o.closeDelay):L()}function $(){function E(V){V||(g.value=!0,m.value=!1)}o.beforeClose?o.beforeClose(E):p()}function z(){o.closeOnClickModal&&$()}function C(){ue&&(m.value=!0)}function L(){m.value=!1}function r(){u("openAutoFocus")}function k(){u("closeAutoFocus")}function x(E){var V;((V=E.detail)==null?void 0:V.focusReason)==="pointer"&&E.preventDefault()}o.lockScroll&&po(m);function ye(){o.closeOnPressEscape&&$()}return K(()=>o.modelValue, E=>{E?(g.value=!1,B(),v.value=!0,h.value=o.zIndex?h.value++:i(),Je(()=>{u("open"),l.value&&(l.value.scrollTop=0)})):m.value&&p()}),K(()=>o.fullscreen, E=>{l.value&&(E?(f=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=f)}),te(()=>{o.modelValue&&(m.value=!0,v.value=!0,B())}),{afterEnter:O,afterLeave:M,beforeLeave:D,handleClose:$,onModalClick:z,close:p,doClose:L,onOpenAutoFocus:r,onCloseAutoFocus:k,onCloseRequested:ye,onFocusoutPrevented:x,titleId:c,bodyId:a,closed:g,style:T,overlayDialogStyle:P,rendered:v,visible:m,zIndex:h}},Ao=["aria-label","aria-labelledby","aria-describedby"],To=Y({name:"ElDialog",inheritAttrs:!1}),Do=Y({...To,props:Io,emits:Mo,setup(o, {expose:l}){const n=o,u=Ze();ae({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},N(()=>!!u.title)),ae({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},N(()=>!!n.customClass));const i=ee("dialog"),f=w(),c=w(),a=w(),{visible:m,titleId:g,bodyId:v,style:h,overlayDialogStyle:t,rendered:d,zIndex:I,afterEnter:T,afterLeave:P,beforeLeave:O,handleClose:M,onModalClick:D,onOpenAutoFocus:B,onCloseAutoFocus:p,onCloseRequested:$,onFocusoutPrevented:z}=So(n,f);Ge(fe,{dialogRef:f,headerRef:c,bodyId:v,ns:i,rendered:d,style:h});const C=pe(D),L=N(()=>n.draggable&&!n.fullscreen);return l({visible:m,dialogContentRef:a}),(r, k)=>(A(),Z(oo,{to:"body",disabled:!r.appendToBody},[y(Pe,{name:"dialog-fade",onAfterEnter:e(T),onAfterLeave:e(P),onBeforeLeave:e(O),persisted:""},{default:_(()=>[Q(y(e(ho),{"custom-mask-event":"",mask:r.modal,"overlay-class":r.modalClass,"z-index":e(I)},{default:_(()=>[s("div",{role:"dialog","aria-modal":"true","aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:e(g),"aria-describedby":e(v),class:F(`${e(i).namespace.value}-overlay-dialog`),style:me(e(t)),onClick:k[0]||(k[0]=(...x)=>e(C).onClick&&e(C).onClick(...x)),onMousedown:k[1]||(k[1]=(...x)=>e(C).onMousedown&&e(C).onMousedown(...x)),onMouseup:k[2]||(k[2]=(...x)=>e(C).onMouseup&&e(C).onMouseup(...x))},[y(e(Le),{loop:"",trapped:e(m),"focus-start-el":"container",onFocusAfterTrapped:e(B),onFocusAfterReleased:e(p),onFocusoutPrevented:e(z),onReleaseRequested:e($)},{default:_(()=>[e(d)?(A(),Z(wo,Qe({key:0,ref_key:"dialogContentRef",ref:a},r.$attrs,{"custom-class":r.customClass,center:r.center,"align-center":r.alignCenter,"close-icon":r.closeIcon,draggable:e(L),fullscreen:r.fullscreen,"show-close":r.showClose,title:r.title,onClose:e(M)}),eo({header:_(()=>[r.$slots.title?S(r.$slots,"title",{key:1}):S(r.$slots,"header",{key:0,close:e(M),titleId:e(g),titleClass:e(i).e("title")})]),default:_(()=>[S(r.$slots,"default")]),_:2},[r.$slots.footer?{name:"footer",fn:_(()=>[S(r.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):G("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Ao)]),_:3},8,["mask","overlay-class","z-index"]),[[J,e(m)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Bo=re(Do,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const $o=Me(Bo);const U= o=>(so("data-v-7c3f9ea8"),o=o(),lo(),o),Lo=U(()=>s("div",{class:"header"},[s("h2",null,"志愿活动详情PAGE")],-1)),Fo={class:"images-join"},Po={class:"information"},Oo=U(()=>s("h3",null,"志愿活动信息",-1)),xo=U(()=>s("h3",null,"活动介绍",-1)),Vo=["innerHTML"],zo={class:"comment"},No={class:"text-area"},Ro={class:"username"},Yo={class:"comment-content"},jo=U(()=>s("p",{style:{"line-height":"2","margin-bottom":"1em"}},"请输入服务时长",-1)),Uo={class:"dialog-footer"},Ho=Y({__name:"activityDetail",setup(o){const n=Oe().nextLookActivity,u=w("info"),i=w(!1),f=w(""),c=w(""),a=to([]);te(()=>{xe(n.a_id).catch(t=>{console.log("clickActivity error",t)})}),Ve(n.a_id).then(t=>{console.log("getActivityComment result: ",t.data),a.push(...t.data.data)}).catch(t=>{console.log("getActivityComment",t)});const m=()=>{ze(n.a_id,c.value).then(t=>{a.unshift(t.data.data)}).catch(t=>{console.log("handlePublishComment",t)}).finally(()=>{c.value=""})},g= t=>{u.value=t},v=()=>{if(n.left_num===0){alert("当前活动人数已满，不能报名");return}i.value=!0},h=async()=>{Ne(n.a_id,parseInt(f.value)).then(t=>{alert(t.data.msg)}).catch(t=>{console.log("joinActivity error: ",t),alert("报名失败")}).finally(()=>{i.value=!1})};return(t, d)=>{const I=Fe,T=De,P=Be,O=Te,M=Ae,D=Se,B=$o;return A(),R(ce,null,[Lo,s("div",Fo,[y(I,{style:{width:"720px"},src:e(n).picture},null,8,["src"]),s("button",{class:"join-activity",onClick:v},"报名")]),y(P,{class:"el-menu-demo",mode:"horizontal","default-active":"info",onSelect:g},{default:_(()=>[y(T,{index:"info"},{default:_(()=>[j("志愿活动信息")]),_:1}),y(T,{index:"comment"},{default:_(()=>[j("评论")]),_:1})]),_:1}),Q(s("div",Po,[Oo,s("p",null,"活动编号: "+b(e(n).a_num),1),s("p",null,"活动名称: "+b(e(n).activity_name),1),s("p",null,"活动类型: "+b(e(n).tag),1),s("p",null,"活动时间: "+b(e(n).time),1),s("p",null,"总招募人数: "+b(e(n).need_num),1),s("p",null,"剩余招募人数: "+b(e(n).left_num),1),s("p",null,"最近点击时间: "+b(e(n).late_click_time),1),s("p",null,"点击次数: "+b(e(n).click_times),1),s("p",null,"联系人: "+b(e(n).contact_person),1),s("p",null,"联系人号码: "+b(e(n).contact_telephone),1),xo,s("div",{class:"content",innerHTML:e(n).description},null,8,Vo)],512),[[J,u.value==="info"]]),Q(s("div",zo,[s("ul",null,[(A(!0),R(ce,null,no(a,(p, $)=>(A(),R("li",{key:p.c_id,class:"comment-item"},[y(O,{shape:"square",size:40,src:p.avatar},null,8,["src"]),s("div",No,[s("p",Ro,b(p.username),1),s("p",Yo,b(p.content),1)])]))),128))]),y(M,{modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]= p=>c.value=p),rows:4,type:"textarea",placeholder:"Please input"},null,8,["modelValue"]),s("button",{class:"comment-button",onClick:m},"发布")],512),[[J,u.value==="comment"]]),y(B,{modelValue:i.value,"onUpdate:modelValue":d[3]||(d[3]= p=>i.value=p),title:"提示",width:"30%"},{footer:_(()=>[s("span",Uo,[y(D,{onClick:d[2]||(d[2]= p=>i.value=!1)},{default:_(()=>[j("取消")]),_:1}),y(D,{type:"primary",onClick:h},{default:_(()=>[j(" 确定 ")]),_:1})])]),default:_(()=>[jo,y(M,{modelValue:f.value,"onUpdate:modelValue":d[1]||(d[1]= p=>f.value=p),placeholder:"请输入服务时长",type:"number"},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}});const ut=ao(Ho,[["__scopeId","data-v-7c3f9ea8"]]);export{ut as default};
